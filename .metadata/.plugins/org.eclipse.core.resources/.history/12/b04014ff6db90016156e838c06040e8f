-- @path SML=/at.ac.tuwien.big.statesml.transformations/metamodels/statesml.ecore
-- @nsURI PN=http://org.pnml.tools/epnk/pnmlcoremodel

module SML2PN;
create OUT : PN from IN : SML;

rule StateSys2PN {
	from
		i1 : SML!StateSystem
	to 
		o0 : PN!PetriNetDoc(
			net <- o1
		),
		o1 : PN!PetriNet(
			id <- 'PN1' ,
			name <- o2,
			page <- pPage
						
		),
		o2 : PN!Name(
			text <- i1.name	
		),
		
		pPage : PN!Page(
			 id <- 'P1',
			 name <- pPageName,
			 object <- initStep
			
			 
		),
		
		pPageName : PN!Name(
			text <- 'MainPage'
		)	,
		
		initStep : PN!Place(
		
			name <- initPlaceName,
			id <- 'initialstep' -- check this if is correct to type mannually !!
			
			
		),
		
		initPlaceName : PN!Name(
			
		
			text <- i1.nodes->select(s | s.oclIsTypeOf(SML!State))->toString()
		)
		
		
		
		
		
}

